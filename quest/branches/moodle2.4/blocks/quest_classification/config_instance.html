<table cellpadding="9" cellspacing="0">
<?php if($this->instance->pagetype != 'mod-quest-view') { ?>
<tr valign="top">
    <td align="right">
        <?php print_string('config_select_quest', 'block_quest_clasification') ?>
    </td>
    <td>
        <?php
            $quests = get_records('quest', 'course', $this->instance->pageid, '', 'id, name');
            if(empty($quests)) {
                echo '<strong>'.get_string('config_no_quests_in_course', 'block_quest_clasification').'</strong>';
                echo '<p><input type="hidden" name="questid" value="0" /></p>';
            }
            else {
                $options = array();
                foreach($quests as $quest) {
                    $options[$quest->id] = $quest->name;
                }
                choose_from_menu($options, 'questid', empty($this->config->questid) ? 0 : $this->config->questid);
            }
        ?>
    </td>
</tr>
<?php } // end if($this->instance->pagetype != PAGE_QUEST_VIEW) ?>
<tr valign="top">
    <td align="right">
        <?php print_string('config_show_best', 'block_quest_clasification') ?>
    </td>
    <td>
    <?php

        for ($i=5; $i>=0; $i--) {
            $numbers[$i] = $i;
        }
        choose_from_menu($numbers, "showbest", empty($this->config->showbest) ? 0 : $this->config->showbest);

    ?>

    </td>
</tr>

<tr valign="top">
    <td align="right">
        <?php print_string('config_use_teams', 'block_quest_clasification') ?>
    </td>
    <td>
        <input name="useteams" type="radio" id="useteams_yes" <?php if(!empty($this->config->useteams)) echo 'checked="checked"'; ?> value="1" /> <label for="useteams_yes"><?php print_string('yes'); ?></label>
        <input name="useteams" type="radio" id="useteams_no"  <?php if(empty($this->config->useteams)) echo 'checked="checked"'; ?> value="0" /> <label for="useteams_no"><?php print_string('no'); ?></label>
    </td>
</tr>

<?php
if(isteacher($this->instance->pageid)){
 echo '<tr valign="top">';
    echo '<td align="right">';
        print_string('config_select_group', 'block_quest_clasification');
    echo '</td>';
    echo '<td>';

            $groups = get_records('groups', 'courseid', $this->instance->pageid, '', 'id, name');
            if(empty($groups)) {
                echo '<strong>'.get_string('config_no_groups_in_course', 'block_quest_clasification').'</strong>';
                echo '<p><input type="hidden" name="groupid" value="0" /></p>';
            }
            else {
                $options = array();
                foreach($groups as $group) {
                    $options[$group->id] = $group->name;
                }
                choose_from_menu($options, 'groupid', empty($this->config->groupid) ? 0 : $this->config->groupid);
            }

    echo '</td>';
 echo '</tr>';
}
?>

<tr>
    <td colspan="2" align="center">
        <input type="submit" value="<?php print_string('savechanges') ?>">
    </td>
</tr>
</table>
